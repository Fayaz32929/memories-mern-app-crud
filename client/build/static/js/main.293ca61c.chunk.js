(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[0],{107:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(8),c=t.n(r),i=t(17),o=t(31),s=(t(87),t(72));var m=Object(o.b)({posts:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"DELETE":return e.filter(e=>e._id!==a.payload);case"UPDATE":case"LIKE":return e.map(e=>e._id===a.payload._id?a.payload:e);case"FETCH_ALL":return a.payload;case"CREATE":return[...e,a.payload];default:return e}}}),d=t(147),p=t(148),u=t(142),g=t(151),E=t(146),y=t(62),b=t.n(y),f=t(136),h=Object(f.a)({media:{height:0,paddingTop:"56.25%",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken"},border:{border:"solid"},fullHeightCard:{height:"100%"},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"15px",height:"100%",position:"relative"},overlay:{position:"absolute",top:"20px",left:"20px",color:"white"},overlay2:{position:"absolute",top:"20px",right:"20px",color:"white"},grid:{display:"flex"},details:{display:"flex",justifyContent:"space-between",margin:"20px"},title:{padding:"0 16px"},cardActions:{padding:"0 16px 8px 16px",display:"flex",justifyContent:"space-between"}}),v=t(139),C=t(141),x=t(150),j=t(143),w=t(144),I=t(69),N=t.n(I),O=t(70),k=t.n(O),T=t(68),D=t.n(T),A=t(67),L=t.n(A),S=t(32),_=t.n(S);const W="https://memories-api-nu.vercel.app/api",z=()=>async e=>{try{const{data:a}=await _.a.get(W);e({type:"FETCH_ALL",payload:a})}catch(a){console.log(a)}},F=e=>async a=>{try{const{data:n}=await(t=e,_.a.post(W,t));a({type:"CREATE",payload:n})}catch(n){console.log(n)}var t},B=(e,a)=>async t=>{try{const{data:n}=await((e,a)=>_.a.patch("".concat(W,"/").concat(e),a))(e,a);t({type:"UPDATE",payload:n})}catch(n){console.log(n)}},M=e=>async a=>{try{await(e=>_.a.delete("".concat(W,"/").concat(e)))(e),a({type:"DELETE",payload:e})}catch(t){console.log(t)}},R=e=>async a=>{try{const{data:t}=await(e=>_.a.patch("".concat(W,"/").concat(e,"/likePost")))(e);a({type:"LIKE",payload:t})}catch(t){console.log(t)}};function H(e){let{post:a,setCurrentId:t}=e;const n=h(),r=Object(i.b)();return l.a.createElement(v.a,{className:n.card},l.a.createElement(C.a,{className:n.media,image:a.selectedFile,title:a.title}),l.a.createElement("div",{className:n.overlay},l.a.createElement(u.a,{variant:"h6"},a.creater),l.a.createElement(u.a,{variant:"body2"},L()(a.createdAt).fromNow())),l.a.createElement("div",{className:n.overlay2},l.a.createElement(x.a,{style:{color:"white"},size:"small",onClick:()=>{t(a._id)}},l.a.createElement(D.a,{fontSize:"medium"}))),l.a.createElement("div",{className:n.details},l.a.createElement(u.a,{variant:"body2",color:"textSecondary"},a.tags.map(e=>"#".concat(e," ")))),l.a.createElement(u.a,{className:n.title,variant:"h5",gutterBottom:!0},a.title),l.a.createElement(j.a,null,l.a.createElement(u.a,{variant:"body2",color:"textSecondary",component:"p"},a.message)),l.a.createElement(w.a,{className:n.cardActions},l.a.createElement(x.a,{size:"small",color:"primary",onClick:()=>{r(R(a._id))}},l.a.createElement(N.a,{fontSize:"small"}),"\xa0 Like \xa0",a.likeCount),l.a.createElement(x.a,{size:"small",color:"primary",onClick:()=>{r(M(a._id))}},l.a.createElement(k.a,null)," Delete")))}var P=Object(f.a)(e=>({mainContainer:{display:"flex",alignItems:"center"},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}})),J=t(145);function K(e){let{setCurrentId:a}=e;const t=Object(i.c)(e=>e.posts),n=P();return t.length?l.a.createElement(E.a,{className:n.mainContainer,container:!0,alignItems:"stretch",spacing:3},t.map(e=>l.a.createElement(E.a,{key:e._id,item:!0,xs:12,sm:6},l.a.createElement(H,{setCurrentId:a,post:e})))):l.a.createElement(J.a,null)}var U=t(74),V=t(149),q=Object(f.a)(e=>({root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{padding:e.spacing(2)},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{marginBottom:10}})),G=t(71),Q=t.n(G);function X(e){let{currentId:a,setCurrentId:t}=e;const[r,c]=Object(n.useState)({creater:"",title:"",message:"",tags:"",selectedFile:""}),o=Object(i.c)(e=>a?e.posts.find(e=>e._id===a):null),s=q(),m=Object(i.b)();Object(n.useEffect)(()=>{o&&c(o)},[o]);const d=()=>{c({creater:"",title:"",message:"",tags:"",selectedFile:""})};return l.a.createElement(U.a,{className:s.paper},l.a.createElement("form",{className:"".concat(s.root," ").concat(s.form),autoComplete:"off",noValidate:!0,onSubmit:e=>{e.preventDefault(),m(a?B(a,r):F(r)),d()}},l.a.createElement(u.a,{variant:"h6"},a?"Editing":"Creating"," a Memory"),l.a.createElement(V.a,{name:"creator",variant:"outlined",label:"Creator",fullWidth:!0,value:r.creater,onChange:e=>c({...r,creater:e.target.value})}),l.a.createElement(V.a,{name:"title",variant:"outlined",label:"Title",fullWidth:!0,value:r.title,onChange:e=>c({...r,title:e.target.value})}),l.a.createElement(V.a,{name:"message",variant:"outlined",label:"Message",fullWidth:!0,value:r.message,onChange:e=>c({...r,message:e.target.value})}),l.a.createElement(V.a,{name:"tags",variant:"outlined",label:"Tags",fullWidth:!0,value:r.tags,onChange:e=>c({...r,tags:e.target.value.split(",")})}),l.a.createElement("div",{className:s.fileInput},l.a.createElement(Q.a,{type:"file",multiple:!1,onDone:e=>{let{base64:a}=e;return c({...r,selectedFile:a})}})),l.a.createElement(x.a,{className:s.buttonSubmit,color:"primary",size:"large",type:"submit",fullWidth:!0,variant:"contained"},"Submit"),l.a.createElement(x.a,{color:"secondary",size:"small",onClick:d,type:"submit",fullWidth:!0,variant:"contained"},"Clear")))}var Y=Object(f.a)(e=>({appBar:{borderRadius:15,margin:"30px 0",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},heading:{color:"rgba(0,183,255, 1)"},image:{marginLeft:"15px"},[e.breakpoints.down("sm")]:{mainContainer:{flexDirection:"column-reverse"}}}));function Z(){const[e,a]=Object(n.useState)(),t=Y(),r=Object(i.b)();return Object(n.useEffect)(()=>{r(z())},[e,r]),l.a.createElement(d.a,{maxWidth:"lg"},l.a.createElement(p.a,{className:t.appBar,position:"static",color:"inherit"},l.a.createElement(u.a,{className:t.heading,variant:"h2",align:"center"},"Memories"),l.a.createElement("img",{className:t.image,src:b.a,alt:"memories",height:"60"})),l.a.createElement(g.a,{in:!0},l.a.createElement(d.a,null,l.a.createElement(E.a,{className:t.mainContainer,container:!0,justifyContent:"space-between",alignItems:"stretch",spacing:3},l.a.createElement(E.a,{item:!0,xs:12,sm:7},l.a.createElement(K,{setCurrentId:a})),l.a.createElement(E.a,{item:!0,xs:12,sm:4},l.a.createElement(X,{currentId:e,setCurrentId:a}))))))}const $=Object(o.d)(m,Object(o.c)(Object(o.a)(s.a)));c.a.render(l.a.createElement(i.a,{store:$},l.a.createElement(Z,null)),document.getElementById("root"))},62:function(e,a,t){e.exports=t.p+"static/media/memories.5c0c63fb.png"},79:function(e,a,t){e.exports=t(107)},87:function(e,a,t){}},[[79,1,2]]]);
//# sourceMappingURL=main.293ca61c.chunk.js.map